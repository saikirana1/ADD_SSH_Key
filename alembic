uv add alembic

alembic init db_migrations
alembic revision --autogenerate -m "account number not unique"
alembic upgrade head
 alembic stamp head



Example:

alembic downgrade -1


You can also go back multiple steps:

alembic downgrade -2


or go back to a specific version:

alembic downgrade 1234abcd5678



Command	Description	Usage
alembic init alembic	Create Alembic environment	First setup
alembic revision -m "msg"	Create empty migration	Manual changes
alembic revision --autogenerate -m "msg"	Auto-generate migration	When model changes
alembic upgrade head	Apply all migrations	Update DB
alembic downgrade -1	Undo last migration	Rollback
alembic current	Show current DB version	Check status
alembic history	List all migrations	Track versions
alembic stamp head	Mark DB as up-to-date	If DB already exists
alembic heads	Show latest version	Check top revision
alembic merge	Merge branches	Resolve conflicts


if you make any mistake just do it 
(Background on this error at: https://sqlalche.me/e/20/f405)
(backend) ➜  backend git:(T-1) ✗ alembic current
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
be000b901da8
(backend) ➜  backend git:(T-1) ✗ alembic history
be000b901da8 -> b2e9c1e2a65e (head), create the equipment table
203ea918f85d -> be000b901da8, create the project table
<base> -> 203ea918f85d, create the file table
(backend) ➜  backend git:(T-1) ✗ alembic current
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
be000b901da8
(backend) ➜  backend git:(T-1) ✗ alembic current
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
be000b901da8 (head)
(backend) ➜  backend git:(T-1) ✗ alembic history
203ea918f85d -> be000b901da8 (head), create the project table
<base> -> 203ea918f85d, create the file table
(backend) ➜  backend git:(T-1) ✗
head adn database should be same


for updating the database we will use this one 
  alembic revision -m "rename maintenancetask to maintenance"
